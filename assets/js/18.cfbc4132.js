(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{181:function(t,a,s){"use strict";s.r(a);var e=s(0),r=Object(e.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"jenkins-ios-任务配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-ios-任务配置"}},[t._v("#")]),t._v(" Jenkins iOS 任务配置")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"依赖准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖准备"}},[t._v("#")]),t._v(" 依赖准备")]),t._v(" "),s("h3",{attrs:{id:"环境依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境依赖"}},[t._v("#")]),t._v(" 环境依赖")]),t._v(" "),s("p",[t._v("请安装 reliable-ios 自动化脚本工具集。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -fsSL https://github.com/macacajs/reliable-ios/files/2114440/Makefile.txt -o Makefile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" init\n")])])]),s("h2",{attrs:{id:"示例项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例项目"}},[t._v("#")]),t._v(" 示例项目")]),t._v(" "),s("p",[t._v("这里有两个示例工程，一个典型的 iOS 工程，另一个是发布私有 cocoapod pod 框架：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"//github.com/app-bootstrap/ios-app-bootstrap"}},[t._v("ios-app-bootstrap - publish iOS App")])]),t._v(" "),s("li",[s("a",{attrs:{href:"//github.com/macacajs/reliable-ios/tree/master/Example"}},[t._v("publish cocoapod frameworks")])])]),t._v(" "),s("h2",{attrs:{id:"快速上手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[t._v("#")]),t._v(" 快速上手")]),t._v(" "),s("h3",{attrs:{id:"第1步-创建任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第1步-创建任务"}},[t._v("#")]),t._v(" 第1步 - 创建任务")]),t._v(" "),s("p",[t._v("创建一个项目名为 "),s("code",[t._v("ios-app-bootstrap")]),t._v("，并且选择自由风格模式。")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ft3id6n0ajj21kw12rduv.jpg",width:"75%"}})]),t._v(" "),s("h3",{attrs:{id:"第2步-scm-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第2步-scm-配置"}},[t._v("#")]),t._v(" 第2步 - SCM 配置")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ft3id6gbmej21kw12r7hb.jpg",width:"75%"}})]),t._v(" "),s("p",[t._v("输入项目的 git 地址，并且选择克隆深度为 1，分支为 "),s("code",[t._v("master")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("https://github.com/app-bootstrap/ios-app-bootstrap.git\n")])])]),s("h3",{attrs:{id:"第3步-构建脚本配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第3步-构建脚本配置"}},[t._v("#")]),t._v(" 第3步 - 构建脚本配置")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ft3jq4frzjj21kw10nqek.jpg",width:"75%"}})]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("RELIABLE_SERVER_URL=http://127.0.0.1:9900 RELIABLE_IOS=true ./ci.sh\n")])])]),s("p",[s("strong",[t._v("注意")])]),t._v(" "),s("ul",[s("li",[t._v("为了能够直接扫码安装应用，请在 Jenkins 配置开发者证书签名。")]),t._v(" "),s("li",[t._v("请确认 "),s("code",[t._v("RELIABLE_SERVER_URL")]),t._v(" 已经正确配置，可以是一个 IPV4 或者某个 url，否则会遇到如下问题：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("error: TypeError: Cannot read property 'server' of undefined\n    at _.postToGW (/root/src/node_modules/reliable-cli/lib/helper.js:31:66)\n    at ReportCommand.pushToWebhook (/root/src/node_modules/reliable-cli/lib/report-command.js:130:18)\n    at ReportCommand._run (/root/src/node_modules/reliable-cli/lib/report-command.js:70:35)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:188:7)\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! ios-app-bootstrap@1.0.11 reliable: `reliable report -c ./reliable.config.js`\nnpm ERR! Exit status 1\n")])])]),s("h3",{attrs:{id:"第4步-立即构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第4步-立即构建"}},[t._v("#")]),t._v(" 第4步 - 立即构建")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ft3jw0q7o0j21kw10ndql.jpg",width:"75%"}})]),t._v(" "),s("p",[t._v("构建结束后，你可以在 reliable web 平台获得构建结果。")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ft3jw2iloqj21kw10nguj.jpg",width:"75%"}})]),t._v(" "),s("p",[t._v("比如我们能够获得 "),s("code",[t._v("ios-app-bootstrap")]),t._v(" 的 "),s("code",[t._v("debug")]),t._v(" 类型包。")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ft3jw318grj21kw10nwp4.jpg",width:"75%"}})]),t._v(" "),s("p",[t._v("Reliable 平台也支持扫码下载安装等实用功能。")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ft3jw32rz0j21kw10ntma.jpg",width:"75%"}})]),t._v(" "),s("p",[t._v("我们也可以获得项目配置，版本等额外信息。如果需要更多上报信息可以参考上报脚本文档 "),s("a",{attrs:{href:"//github.com/macacajs/reliable-cli#configuration"}},[t._v("reliable-cli#configuration")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"第5步-自动化测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第5步-自动化测试"}},[t._v("#")]),t._v(" 第5步 - 自动化测试")]),t._v(" "),s("p",[t._v("Reliable 无缝集成 Macaca 自动化测试工具，支持通过率报告，端到端链路刻画，覆盖率等质量覆盖方案。")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ftc4y26xzaj21kw10g12f.jpg",width:"75%"}})]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"/reliable/assets/6d308bd9gy1ftc4y31cf5j21kw10g7kz.jpg",width:"75%"}})])])}],!1,null,null,null);a.default=r.exports}}]);